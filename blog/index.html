---
layout: default
title: Blog
extra_js:
  - taglist.js
---
<div class="bounds--blog">
  <div class="blog-post__preview-list">
    <!-- This loops through the paginated posts -->
    {% for post in paginator.posts %}
      {% include post-preview.html %}
    {% endfor %}

    <!-- Pagination links -->
    <div class="pagination">
      {% if paginator.previous_page %}
        <a href="{{ paginator.previous_page_path }}" class="pagination__previous">{% include images/arrow-right.svg %}Newer</a>
      {% else %}
        <span class="pagination__previous">{% include images/arrow-right.svg %}Newer</span>
      {% endif %}

      {% assign pagination_padding = site.paginate_list_count | divided_by: 2 %}
      {% assign lower_limit = paginator.page | minus: pagination_padding %}
      {% assign upper_limit = paginator.page | plus: pagination_padding %}
      {% if paginator.total_pages > site.paginate_list_count %}
        {% if lower_limit <= 0 %}
          {% assign count_start = 1 %}
          {% assign count_end = site.paginate_list_count %}
        {% elsif upper_limit > paginator.total_pages %}
          {% assign count_start = paginator.total_pages | minus: site.paginate_list_count %}
          {% assign count_start = count_start | plus: 1 %}
          {% assign count_end = paginator.total_pages %}
        {% else %}
          {% assign count_start = paginator.page | minus: pagination_padding %}
          {% assign count_end = paginator.page | plus: pagination_padding %}
        {% endif %}
      {% else %}
        {% assign count_start = 1 %}
        {% assign count_end = paginator.total_pages %}
      {% endif %}

      {% for i in (count_start..count_end) %}
        {% if i == paginator.page %}
          <span class="pagination__page--current">{{ i }}</span>
        {% else %}
          <a href="/blog/page{{ i }}/" class="pagination__page">{{ i }}</a>
        {% endif %}
      {% endfor %}


      {% if paginator.next_page %}
        <a href="{{ paginator.next_page_path }}" class="pagination__next">Older{% include images/arrow-right.svg %}</a>
      {% else %}
        <span class="pagination__next">Older{% include images/arrow-right.svg %}</span>
      {% endif %}
    </div>
  </div>
  <aside class="blog-aside">
    <section id="top-tag-list" class="tag-list__top">
      <header>
        <h2><img src="/images/trophy-icon.svg"/> Top Tags</h2>
      </header>
    </section>
    <section class="featured-posts__blog">
      <header>
        <h2><img src="/images/star-icon.svg"/> Featured Posts</h2>
      </header>
      <ul>
        {% assign counter = 0 %}
        {% for post in site.posts %}
          {% if post.featured == true %}
            {% assign counter=counter | plus:1 %}
            {% if counter <= 3 %}
              <li><a href="{{ post.permalink }}">{{ post.title }}</a></li>
            {% else %}
              {% break %}
            {% endif %}
          {% endif %}
        {% endfor %}
      </ul>
    </section>
    <section class="tag-list__all">
      <header>
        <h2><img src="/images/tag-icon.svg"/> All Tags</h2>
      </header>
      <ul>
        {% for page in site.pages %}
          {% if page.category contains 'tag_page' %}
            <li><a href="{{ page.permalink }}">{{ page.title }}</a></li>
          {% endif %}
        {% endfor %}
      </ul>
    </section>
  </aside>
</div>
